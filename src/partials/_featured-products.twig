{% if settings.featured_products_limit > 0 and settings.featured_products_collection is not empty %}

{% if settings.featured_products_collection is not empty and collections[settings.featured_products_collection] is defined %}
{% set featured_products = collections[settings.featured_products_collection].products %}
{% endif %}

{% if settings.featured_products_collection is not empty and featured_products | length > 0%}
<div class="featured-products margin-bottom">
  <div class="container">
    {% if settings.featured_products_title is not empty %}
    <div class="row">
      <div class="col-sm-12 section__title">
        <h2 class="section-heading">{{ settings.featured_products_title }}</h2>
      </div>
    </div>
    {% endif %}
    <div class="row symmetrical-container">
        {% set limit = settings.featured_products_limit is not empty ? min(0+settings.featured_products_limit, 50) : 50 %}
        {% for product in featured_products | slice(0, limit) %}
          <div class="col-xs-6 col-sm-6 col-md-3 symmetrical">
            {% include "_product-card.twig" %}
          </div>
        {% endfor %}
    </div>
  </div>
</div>
{% endif %}

{% else %}
<div class="container placeholder-hover">
  <div class="placeholder-helper">
    <div class="placeholder-info text-center">
      <h3>¡Falta poco!</h3>
      <p>Esta sección mostrará tus productos destacados. Para definirlos dirígete al área de configuración del tema y asigna la colección que los contiene.</p>
      <a href="/admin/collections" class="btn btn-placeholder">Gestionar colecciones</a>
      <a href="/admin/themes" class="btn btn-placeholder">Ir a sección de temas</a>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 section__title">
      <h2 class="section-heading">Productos destacados</h2>
    </div>
  </div>
  <div class="row front__product__grid">
    <div class="col-xs-6 col-md-3">
      {% include "_product-placeholder.twig" %}
    </div>
    <div class="col-xs-6 col-md-3">
      {% include "_product-placeholder.twig" %}
    </div>
    <div class="col-xs-6 col-md-3">
      {% include "_product-placeholder.twig" %}
    </div>
    <div class="col-xs-6 col-md-3">
      {% include "_product-placeholder.twig" %}
    </div>
  </div>
</div>
{% endif %}
